<div class="flex justify-center">
    <p-toast />
    <p-confirmDialog />

    <div class="flex mt-4">
        <p class="font-bold text-2xl"><span class="font-bold text-2xl pi pi-list mr-1"></span>Cartas</p>
    </div>
</div>

<div class="flex justify-center mt-4">
    <p-card>
        <p-table
          #dt2
          [value]="cartas"
          [paginator]="true"
          [rows]="5"
          [rowsPerPageOptions]="[5, 10, 20]"
          styleClass="w-full"
          sortMode="multiple"
          [tableStyle]="{'width': '100%'}"
          [globalFilterFields]="['nombre', 'cliente.nombre', 'autoMemoryDolls.nombre', 'cartaEstado.nombre']"
          [scrollable]="true"
          size="small"
          scrollHeight="700px"
        >
          <ng-template #caption>
            <div class="flex">
                <p-iconfield iconPosition="left" class="ml-auto">
                    <p-inputicon>
                        <i class="pi pi-search"></i>
                    </p-inputicon>
                    <input
                        pInputText
                        size="small"
                        #searchInput
                        type="text"
                        (input)="dt2.filterGlobal(searchInput.value, 'contains')"
                        placeholder="Buscar"
                    />
                </p-iconfield>
            </div>
          </ng-template>
            <ng-template pTemplate="header">
                <tr>
                    <th pSortableColumn="fechaCreacion">
                      <p-columnFilter field="fechaCreacion" display="menu"/>
                        Fecha Creacion <p-sortIcon field="fechaCreacion"/>
                    </th>
                    <th pSortableColumn="motivo">
                        Motivo <p-sortIcon field="motivo" />
                    </th>
                    <th pSortableColumn="cliente.nombre">
                        Cliente <p-sortIcon field="cliente.nombre" />
                    </th>
                    <th pSortableColumn="autoMemoryDolls.nombre">
                        Doll <p-sortIcon field="autoMemoryDolls.nombre" />
                    </th>
                    <th pSortableColumn="cartaEstado.nombre">
                        Estado <p-sortIcon field="cartaEstado.nombre" />
                    </th>
                    <th>
                        Acci√≥n
                    </th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-carta>
                <tr>
                    <td>{{ carta.fechaCreacion }}</td>
                    <td>{{ carta.motivo }}</td>
                    <td>{{ carta.cliente.nombre }}</td>
                    <td>{{ carta.autoMemoryDolls.nombre }}</td>
                    <td>{{ carta.cartaEstado.nombre }}</td>
                    <td class="text-center">
                      <p-button 
                        icon="pi pi-file-edit"
                        severity="info"
                        (onClick)="editCarta(carta.id)"
                        styleClass="h-7 !w-9 !mr-1 !mb-1"
                        size="small"
                      />
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </p-card>
</div>